# ä¸­å—å¤§å­¦nCovå¥åº·æ‰“å¡å®šæ—¶è‡ªåŠ¨è„šæœ¬ï¼ˆGithub-Actionsç‰ˆï¼‰

**æ³¨æ„**ï¼šæœ¬masteråˆ†æ”¯ç‰ˆæœ¬ä»£ç ä½¿ç”¨Github-Actionså®šæ—¶è¿è¡Œï¼Œæ— éœ€éƒ¨ç½²åœ¨æœåŠ¡å™¨ã€‚~~å¦‚éœ€åœ¨æœåŠ¡å™¨ä¸­è¿è¡Œï¼Œè¯·ä½¿ç”¨serviceåˆ†æ”¯ä¸­çš„ä»£ç ã€‚~~
**æ³¨æ„æœåŠ¡å™¨ä¸Šæ— é¡»ä½¿ç”¨serviceåˆ†æ”¯ï¼Œä½¿ç”¨masteråˆ†æ”¯äº¦å¯**
## æœåŠ¡å™¨ä½¿ç”¨æ–¹æ³•
git cloneæœ¬é¡¹ç›®åï¼Œè¿›å…¥é¡¹ç›®
```shell
pip install -r requirements.txt
crontab -e
æŒ‰é”®ç›˜ä¸Šçš„iï¼Œè°ƒåˆ°æœ€åä¸€è¡Œï¼Œå¤åˆ¶ç²˜è´´ä»¥ä¸‹å‘½ä»¤
2 0 * * * nohup python3 -u auto.py --username=å­¦å· --password=ä¿¡æ¯é—¨æˆ·ç™»é™†å¯†ç  >out.log 2>&1 &
ç„¶åæŒ‰Esc,æŒ‰è‹±æ–‡:ï¼Œè¾“å…¥wqï¼Œå›è½¦ï¼ŒæœåŠ¡å™¨ä¼šåœ¨æ¯æ™š00:02è‡ªåŠ¨è¿è¡Œ
```
**æ³¨:ä»¥ä¸Šä¸ºlinuxç³»ç»Ÿå‘½ä»¤ï¼Œè¯·æ³¨æ„æœåŠ¡å™¨æ—¶åŒºï¼Œä¿®æ”¹å¼€å¤´çš„2 0 * * * **

å¦‚æœ¬é¡¹ç›®å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œè¯·å¸®å¿™ç‚¹ä¸€ä¸ªâ­staræ”¯æŒä¸€ä¸‹ä½œè€…ã€‚å¦‚æœæ‚¨æƒ³æ›´è¿›ä¸€æ­¥ï¼Œå¯ä»¥ç‚¹å‡»ğŸ’—Sponsorè¯·æˆ‘å–æ¯å†°å¯ä¹ã€‚æ‚¨çš„é¼“åŠ±æ˜¯æˆ‘æŒç»­ç»´æŠ¤å’Œä¼˜åŒ–æœ¬é¡¹ç›®çš„æœ€å¤§åŠ¨åŠ›ã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿æäº¤issueæˆ–discussionä¸æˆ‘è”ç³»ï¼Œåœ¨åé¦ˆå‰è¯·ä»”ç»†é˜…è¯»IssuesåŒºçš„[ä½¿ç”¨è¯´æ˜](https://github.com/lxy764139720/Auto_Attendance/issues/13)å“¦ã€‚

## Description

**ç‰¹æ­¤å£°æ˜**ï¼šé¡¹ç›®ç”¨äºå­¦ä¹ äº¤æµï¼Œä»…ç”¨äºå„é¡¹æ— å¼‚å¸¸æ—¶æ‰“å¡ï¼Œå¦‚æœ‰èº«ä½“ä¸é€‚ç­‰æƒ…å†µè¿˜è¯·è‡ªè¡Œå¦‚å®æ‰“å¡ï¼

* [**æœ¬æ¬¡æ›´æ–°å†…å®¹**]ç”±[@adamqqq](https://github.com/adamqqqplay)ä¿®å¤äº†Jsonè§£æé—®é¢˜ï¼Œå¢å¼ºäº†éšç§æ€§
* ç”±[@hidragonma](https://github.com/hidragonma)ä¿®å¤äº†[äº”ä¸€èŠ‚åçš„æ‰“å¡æ•…éšœ](https://github.com/hidragonma)ï¼Œæ„Ÿè°¢è´¡çŒ®ä»£ç ï¼
* ä»…éœ€è¾“å…¥[***ä¸­å—å¤§å­¦ç»Ÿä¸€èº«ä»½è®¤è¯å¹³å°***](http://ca.csu.edu.cn/authserver/login)çš„è´¦å·å’Œå¯†ç å³å¯è¿›è¡Œè‡ªåŠ¨æ‰“å¡ï¼ˆä¸å†éœ€è¦æ‰‹åŠ¨è·å–cookieï¼‰
* å¯[è®¾ç½®è‡ªåŠ¨æ‰“å¡æ—¶é—´](#dksj)ï¼Œé»˜è®¤ä¸ºæ¯å¤©7ç‚¹5åˆ†
* é»˜è®¤æ¯æ¬¡æäº¤ä¸Šæ¬¡æ‰€æäº¤çš„å†…å®¹ï¼ˆåªæœ‰æ—¥æœŸéƒ¨åˆ†æ›´æ–°ï¼‰
* **ä½ç½®ä¿¡æ¯ä¸ä¸Šä¸€æ¬¡æ‰“å¡çš„ä½ç½®ç›¸åŒ**ï¼Œå³ä½¿ä¸‹æ¬¡æ‰“å¡æ—¶æ‚¨çš„å®šä½æ”¹å˜ä¹Ÿä¸ä¼šå¯¹æ‰“å¡ä½ç½®é€ æˆå½±å“ã€‚å¦‚éœ€å˜æ›´æ‰“å¡ä½ç½®ï¼Œå¯ä»¥åœ¨å½“å¤©æ‰“å¡æ—¶é—´å‰æ‰‹åŠ¨å®šä½æ‰“å¡ï¼Œä¹‹åçš„ä½ç½®ä¿¡æ¯ä¼šéšä¹‹æ”¹å˜
* Github-Actionsæ‰“å¡å¤±è´¥æ—¶ä¼šé€šè¿‡Githubé€šçŸ¥é‚®ä»¶å‘é€è‡³ç»‘å®šçš„é‚®ç®±ï¼ˆéœ€è¦æ‰‹åŠ¨è®¾ç½®Githubè´¦å·ç»‘å®šçš„é‚®ç®±ï¼‰
* æ‚¨çš„å­¦å·å’Œå¯†ç å‡ä»¥ç§˜é’¥å½¢å¼ä¿å­˜åœ¨æ‚¨çš„Githubä»“åº“ä¸­ï¼Œå…¶ä»–äººæ— æ³•æŸ¥çœ‹

![](https://i.loli.net/2020/12/06/qG5X4pUNYyTDaCz.png)

![20200817190036](https://i.loli.net/2020/12/06/e5zZgs6BFDN3IUA.png)

## Usage

### è¿è¡Œæ–¹å¼

1. forkæœ¬é¡¹ç›®åˆ°ä½ çš„ä¸ªäººè´¦å·
   
2. è®¾ç½®Secrets

    ä»Githubä¸­è¿›å…¥åˆšåˆšforkåˆ°ä½ çš„ä¸ªäººè´¦å·ä¸‹çš„æœ¬é¡¹ç›®ï¼Œæ‰“å¼€é¡¹ç›®çš„Settings->Secretsé¡µé¢
    

![20201206004701](https://i.loli.net/2020/12/06/cegmk76uprEvHU5.png)

* ç‚¹å‡»New repository SecretæŒ‰é’®åˆ›å»ºç¬¬ä¸€ä¸ªä»“åº“å¯†ç 

  åœ¨Nameæ ä¸­è¾“å…¥å¤§å†™å­—ç¬¦ä¸² **USERNAME** ï¼Œåœ¨Valueæ ä¸­è¾“å…¥ä½ çš„[**ä¸­å—å¤§å­¦ç»Ÿä¸€èº«ä»½è®¤è¯å¹³å°**](http://ca.csu.edu.cn/authserver/login)çš„è´¦å·ï¼Œç‚¹å‡»Add secretæŒ‰é’®ä¿å­˜

* å†æ¬¡ç‚¹å‡»New repository SecretæŒ‰é’®åˆ›å»ºç¬¬äºŒä¸ªä»“åº“å¯†ç 

  åœ¨Nameæ ä¸­è¾“å…¥å¤§å†™å­—ç¬¦ä¸² **PASSWORD** ï¼Œåœ¨Valueæ ä¸­è¾“å…¥ä½ çš„[**ä¸­å—å¤§å­¦ç»Ÿä¸€èº«ä»½è®¤è¯å¹³å°**](http://ca.csu.edu.cn/authserver/login)çš„å¯†ç ï¼Œç‚¹å‡»Add secretæŒ‰é’®ä¿å­˜

3. å¯åŠ¨å®šæ—¶æ‰“å¡

    æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨å¼€å¯å·¥ä½œæµï¼ˆæ¨èï¼‰

    è¿›å…¥Actionsé¡µé¢ï¼Œç‚¹å‡»è¯¥å·¥ä½œæµï¼Œç‚¹å‡»Run workflowæŒ‰é’®

    ![eIhPdkpV6QqzbJ1](https://i.loli.net/2020/12/06/eIhPdkpV6QqzbJ1.png)

    æ‰‹åŠ¨å¼€å¯å·¥ä½œæµçš„åŠŸèƒ½ç”±[@sumowi](https://github.com/sumowi)é€šè¿‡/.github/workflows/python-package.ymlæ–‡ä»¶ä¸­çš„workflow_dispatchå®ç°

    æ–¹æ³•äºŒï¼šä¿®æ”¹Readmeä»¥è‡ªåŠ¨è§¦å‘Github-Actionså·¥ä½œæµ

    è¿›å…¥Codeé¡µé¢ï¼Œç‚¹å‡»ä¿®æ”¹æŒ‰é’®

    ![20200817191741](https://i.loli.net/2020/12/06/DHy13dsNSxrchVz.png)

    åœ¨readmeæ–‡ä»¶ä¸­éšæ„ä¿®æ”¹ä»»æ„å­—ç¬¦ï¼ˆæ¯”å¦‚åŠ ä¸ªç©ºæ ¼ï¼‰ï¼Œç„¶åç‚¹å‡»ä¸‹æ–¹çš„Commit Changeså³å¯æ¿€æ´»æ¯æ—¥å®šæ—¶æ‰“å¡è„šæœ¬

    ![20200817192122](https://i.loli.net/2020/12/06/1W6x2wIBOTCVl7K.png)

4. æŸ¥çœ‹è¿è¡Œæƒ…å†µ

    æ‰“å¼€Actionsé¡µé¢ï¼Œæ­¤æ—¶åœ¨workflowsä¸­åº”è¯¥å‡ºç°äº†æ­£åœ¨è¿è¡Œçš„å·¥ä½œæµã€‚å½“æäº¤æ–‡ä»¶æ—¶ä¼šé©¬ä¸Šè¿›è¡Œä¸€æ¬¡æ‰“å¡ï¼Œä»¥åå°†ä¼šé»˜è®¤åœ¨æ¯å¤©çš„7:05è¿›è¡Œæ‰“å¡

    å¦‚æœæ‰“å¡å¤±è´¥è¯·é‡æ–°è¿è¡Œworkflowså¹¶æ£€æŸ¥è´¦å·å¯†ç è®¾ç½®æ˜¯å¦æ­£ç¡®
    
    ![20200817192416](https://i.loli.net/2020/12/06/P31tu5einhLpArk.png)

## <span id="dksj">ä¿®æ”¹æ‰“å¡æ—¶é—´</span>

æ‰“å¼€é¡¹ç›®ä¸­çš„/.github/workflows/python-package.ymlæ–‡ä»¶ï¼Œä¿®æ”¹cornä¸­çš„å€¼ï¼Œæ³¨æ„ä½¿ç”¨UTCé›¶åŒºæ—¶é—´ã€‚

ä¾‹å¦‚ï¼Œå½“å‰é»˜è®¤æ‰“å¡æ—¶é—´æ˜¯åŒ—äº¬æ—¶é—´(UTC+8)æ¯å¤©7:05ï¼Œæ¢ç®—æˆUTCé›¶åŒºæ—¶é—´ä¸º23:05ã€‚

æ›´å¤šå…³äºæ—¶é—´çš„å…·ä½“ä¹¦å†™æ ¼å¼è¯·å‚è€ƒ[POSIX cron è¯­æ³•](https://crontab.guru/)å’Œ[å®˜æ–¹æ–‡æ¡£](https://docs.github.com/cn/actions/reference/events-that-trigger-workflows#)ã€‚

![20200817194102](https://i.loli.net/2020/12/06/zqXQvYCJwfrN3Pc.png)

![20200817194250](https://i.loli.net/2020/12/06/oRjts1Yy5NV9TI8.png)

---
å‚è€ƒå¼€æºä»“åº“ï¼š

1. [æµ™å¤§nCovå¥åº·æ‰“å¡å®šæ—¶è‡ªåŠ¨è„šæœ¬](https://github.com/Tishacy/ZJU-nCov-Hitcarder)
2. [åŒ—äº¬åŒ–å·¥å¤§å­¦COVID-19è‡ªåŠ¨å¡«æŠ¥è„šæœ¬](https://github.com/W0n9/BUCT_nCoV_Report)

é¸£è°¢ï¼š

[@sumowi](https://github.com/sumowi)

[@hidragonma](https://github.com/hidragonma)

[@adamqqq](https://github.com/adamqqqplay)
